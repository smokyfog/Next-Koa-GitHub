{"version":3,"file":"static/webpack/static\\development\\pages\\_app.js.04b0302e2c35a9a7c284.hot-update.js","sources":["webpack:///./store/store.js"],"sourcesContent":["import { createStore, combineReducers, applyMiddleware } from 'redux'\r\nimport ReduxThunk from 'redux-thunk'\r\nimport { composeWithDevTools } from 'redux-devtools-extension'\r\n\r\nconst initialState = {\r\n  count: 0\r\n}\r\n\r\nconst userInitialState = {\r\n  username: 'jack',\r\n  age: 18\r\n}\r\n\r\nconst ADD = 'ADD'\r\nfunction countReducer(state = initialState, action) {\r\n  console.log(state, action)\r\n  switch (action.type)  {\r\n    case ADD:\r\n      return { count: state.count + (action.num || 1) }\r\n    default:\r\n      return state\r\n  }\r\n}\r\n\r\nconst UPDATE_USERNAME = 'UPDATE_USERNAME'\r\nfunction userReducer(state = userInitialState, action) {\r\n  switch(action.type) {\r\n    case UPDATE_USERNAME:\r\n      return {\r\n        ...state,\r\n        username: action.name\r\n      }\r\n    default:\r\n      return state\r\n  }\r\n}\r\n\r\nconst allReducers = combineReducers({\r\n  counter: countReducer,\r\n  user: userReducer\r\n})\r\n\r\nconst store = createStore(\r\n  allReducers, \r\n  {\r\n    counter: initialState,\r\n    user: userInitialState\r\n  },\r\n  composeWithDevTools(applyMiddleware(ReduxThunk))\r\n)\r\n\r\n// action creatore\r\n// 同步的dispatch\r\nexport function add(num) {\r\n  return {\r\n    type: ADD,\r\n    num\r\n  }\r\n}\r\n\r\n// 异步的dispatch\r\nfunction addAsync(num) {\r\n  return (dispatch) => {\r\n    setTimeout(() => {\r\n      dispatch(add(num))\r\n    }, 1000)\r\n  }\r\n}\r\n\r\n// console.log(store)\r\n// console.log(store.getState())\r\nstore.dispatch(add(3))\r\nstore.subscribe(() => { // \r\n  console.log(store.getState())\r\n})\r\nstore.dispatch(addAsync(5))\r\n\r\n// store.dispatch({ type: ADD })\r\nstore.dispatch({ type: UPDATE_USERNAME, name: 'lilei' })\r\n\r\nexport default function initializeStore(state) {\r\n  const store = createStore(\r\n    allReducers, \r\n    Object.assign({}, {\r\n      counter: initialState,\r\n      user: userInitialState\r\n    }, state),\r\n    // {\r\n    //   counter: initialState,\r\n    //   user: userInitialState\r\n    // },\r\n    composeWithDevTools(applyMiddleware(ReduxThunk))\r\n  )\r\n  return store\r\n}"],"mappings":";;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AAEA;AACA;AADA;AAIA;AACA;AACA;AAFA;AAKA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;AACA;AACA;AAAA;AAAA;AACA;AAAA;AACA;AAJA;AAMA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AACA;AACA;AAEA;AAFA;AACA;AAGA;AACA;AAPA;AASA;AACA;AACA;AACA;AACA;AAFA;AAKA;AAGA;AACA;AAFA;AAQA;AACA;AAAA;AACA;AACA;AACA;AAFA;AAIA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AACA;AADA;AACA;AAAA;AACA;AACA;AACA;AACA;AAEA;AAAA;AAAA;AAAA;AAEA;AACA;AAGA;AACA;AAFA;AAKA;AACA;AACA;AACA;AAEA;AACA;;;;A","sourceRoot":""}