{"ast":null,"code":"import _objectSpread from \"@babel/runtime-corejs2/helpers/esm/objectSpread\";\nimport _objectWithoutProperties from \"@babel/runtime-corejs2/helpers/esm/objectWithoutProperties\";\nimport _Object$entries from \"@babel/runtime-corejs2/core-js/object/entries\";\nimport _JSXStyle from \"styled-jsx/style\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport Link from 'next/link';\nimport { withRouter } from 'next/router';\nimport Repo from './Repo';\nimport { request } from '../lib/api';\nimport initCache from '../lib/client-cache';\nimport { genDetailCacheKeyStrate, genDetailCacheKey } from '../lib/util';\n\nfunction makeQuery(queryObject) {\n  const query = _Object$entries(queryObject).reduce((result, entry) => {\n    result.push(entry.join('='));\n    return result;\n  }, []).join('&');\n\n  return `?${query}`;\n}\n\nconst {\n  cache,\n  useCache\n} = initCache({\n  genCacheKeyStrate: genDetailCacheKeyStrate\n});\nexport default ((Comp, type = 'index') => {\n  const WithDetail = (_ref) => {\n    let {\n      repoBasic,\n      router\n    } = _ref,\n        rest = _objectWithoutProperties(_ref, [\"repoBasic\", \"router\"]);\n\n    useCache(genDetailCacheKey(router), _objectSpread({\n      repoBasic\n    }, rest));\n    const query = makeQuery(router.query);\n    return __jsx(\"div\", {\n      className: \"jsx-1904177248\" + \" \" + \"root\"\n    }, __jsx(\"div\", {\n      className: \"jsx-1904177248\" + \" \" + \"repo-basic\"\n    }, __jsx(Repo, {\n      repo: repoBasic\n    }), __jsx(\"div\", {\n      className: \"jsx-1904177248\" + \" \" + \"tabs\"\n    }, __jsx(Link, {\n      href: `/detail${query}`\n    }, type === 'index' ? __jsx(\"span\", {\n      className: \"jsx-1904177248\" + \" \" + \"tab\"\n    }, \"Readme\") : __jsx(\"a\", {\n      title: \"readme\",\n      className: \"jsx-1904177248\" + \" \" + \"tab index\"\n    }, \"Readme\")), __jsx(Link, {\n      href: `/detail/issues${query}`\n    }, type === 'issues' ? __jsx(\"span\", {\n      className: \"jsx-1904177248\" + \" \" + \"tab\"\n    }, \"Issues\") : __jsx(\"a\", {\n      title: \"issues\",\n      className: \"jsx-1904177248\" + \" \" + \"tab issues\"\n    }, \"Issues\")))), __jsx(\"div\", {\n      className: \"jsx-1904177248\"\n    }, __jsx(Comp, rest)), __jsx(_JSXStyle, {\n      id: \"1904177248\"\n    }, \".root.jsx-1904177248{padding-top:20px;}.repo-basic.jsx-1904177248{padding:20px;border:1px solid #eee;margin-bottom:20px;border-radius:5px;}.tab.jsx-1904177248+.tab.jsx-1904177248{margin-left:20px;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkQ6XFxyZWFjdFN0dWR5XFxOZXh0LUtvYS1HaXRIdWJcXG5leHQtZ2l0aHViXFxjb21wb25lbnRzXFxXaXRoUmVwb0Jhc2ljLmpzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFnRG9CLEFBR2dDLEFBSUosQUFPSSxhQU5LLElBSnhCLEFBV0Esa0JBTnFCLG1CQUNELGtCQUNwQiIsImZpbGUiOiJEOlxccmVhY3RTdHVkeVxcTmV4dC1Lb2EtR2l0SHViXFxuZXh0LWdpdGh1YlxcY29tcG9uZW50c1xcV2l0aFJlcG9CYXNpYy5qc3giLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgTGluayBmcm9tICduZXh0L2xpbmsnXHJcbmltcG9ydCB7IHdpdGhSb3V0ZXIgfSBmcm9tICduZXh0L3JvdXRlcidcclxuaW1wb3J0IFJlcG8gZnJvbSAnLi9SZXBvJ1xyXG5pbXBvcnQgeyByZXF1ZXN0IH0gZnJvbSAnLi4vbGliL2FwaSdcclxuaW1wb3J0IGluaXRDYWNoZSBmcm9tICcuLi9saWIvY2xpZW50LWNhY2hlJ1xyXG5pbXBvcnQgeyBnZW5EZXRhaWxDYWNoZUtleVN0cmF0ZSwgZ2VuRGV0YWlsQ2FjaGVLZXkgfSBmcm9tICcuLi9saWIvdXRpbCdcclxuXHJcbmZ1bmN0aW9uIG1ha2VRdWVyeShxdWVyeU9iamVjdCkge1xyXG4gIGNvbnN0IHF1ZXJ5ID0gT2JqZWN0LmVudHJpZXMocXVlcnlPYmplY3QpXHJcbiAgICAucmVkdWNlKChyZXN1bHQsIGVudHJ5KSA9PiB7XHJcbiAgICAgIHJlc3VsdC5wdXNoKGVudHJ5LmpvaW4oJz0nKSlcclxuICAgICAgcmV0dXJuIHJlc3VsdFxyXG4gICAgfSwgW10pXHJcbiAgICAuam9pbignJicpXHJcbiAgcmV0dXJuIGA/JHtxdWVyeX1gXHJcbn1cclxuXHJcbmNvbnN0IHsgY2FjaGUsIHVzZUNhY2hlIH0gPSBpbml0Q2FjaGUoe1xyXG4gIGdlbkNhY2hlS2V5U3RyYXRlOiBnZW5EZXRhaWxDYWNoZUtleVN0cmF0ZSxcclxufSlcclxuZXhwb3J0IGRlZmF1bHQgKENvbXAsIHR5cGUgPSAnaW5kZXgnKSA9PiB7XHJcbiAgY29uc3QgV2l0aERldGFpbCA9ICh7IHJlcG9CYXNpYywgcm91dGVyLCAuLi5yZXN0IH0pID0+IHtcclxuICAgIHVzZUNhY2hlKGdlbkRldGFpbENhY2hlS2V5KHJvdXRlciksIHsgcmVwb0Jhc2ljLCAuLi5yZXN0IH0pXHJcbiAgICBjb25zdCBxdWVyeSA9IG1ha2VRdWVyeShyb3V0ZXIucXVlcnkpXHJcbiAgICByZXR1cm4gKFxyXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cInJvb3RcIj5cclxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInJlcG8tYmFzaWNcIj5cclxuICAgICAgICAgIDxSZXBvIHJlcG89e3JlcG9CYXNpY30gLz5cclxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGFic1wiPlxyXG4gICAgICAgICAgICA8TGluayBocmVmPXtgL2RldGFpbCR7cXVlcnl9YH0+XHJcbiAgICAgICAgICAgICAge3R5cGUgPT09ICdpbmRleCcgPyAoXHJcbiAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJ0YWJcIj5SZWFkbWU8L3NwYW4+XHJcbiAgICAgICAgICAgICAgKSA6IChcclxuICAgICAgICAgICAgICAgIDxhIHRpdGxlPVwicmVhZG1lXCIgY2xhc3NOYW1lPVwidGFiIGluZGV4XCI+UmVhZG1lPC9hPlxyXG4gICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgIDwvTGluaz5cclxuICAgICAgICAgICAgPExpbmsgaHJlZj17YC9kZXRhaWwvaXNzdWVzJHtxdWVyeX1gfT5cclxuICAgICAgICAgICAgICB7dHlwZSA9PT0gJ2lzc3VlcycgPyAoXHJcbiAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJ0YWJcIj5Jc3N1ZXM8L3NwYW4+XHJcbiAgICAgICAgICAgICAgKSA6IChcclxuICAgICAgICAgICAgICAgIDxhIHRpdGxlPVwiaXNzdWVzXCIgY2xhc3NOYW1lPVwidGFiIGlzc3Vlc1wiPklzc3VlczwvYT5cclxuICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICA8L0xpbms+XHJcbiAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8ZGl2PlxyXG4gICAgICAgICAgPENvbXAgey4uLnJlc3R9IC8+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPHN0eWxlIGpzeD57YFxyXG4gICAgICAgICAgICAucm9vdCB7XHJcbiAgICAgICAgICAgICAgcGFkZGluZy10b3A6IDIwcHg7XHJcbiAgICAgICAgICAgIH1cclxuICBcclxuICAgICAgICAgICAgLnJlcG8tYmFzaWMge1xyXG4gICAgICAgICAgICAgIHBhZGRpbmc6IDIwcHg7XHJcbiAgICAgICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgI2VlZTtcclxuICAgICAgICAgICAgICBtYXJnaW4tYm90dG9tOiAyMHB4O1xyXG4gICAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDVweDtcclxuICAgICAgICAgICAgfVxyXG4gIFxyXG4gICAgICAgICAgICAudGFiICsgLnRhYiB7XHJcbiAgICAgICAgICAgICAgbWFyZ2luLWxlZnQ6IDIwcHg7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIGB9XHJcbiAgICAgICAgPC9zdHlsZT5cclxuICAgICAgPC9kaXY+XHJcbiAgICApXHJcbiAgfVxyXG5cclxuICBXaXRoRGV0YWlsLmdldEluaXRpYWxQcm9wcyA9IGNhY2hlKGFzeW5jIChjb250ZXh0KSA9PiB7XHJcbiAgICBjb25zdCB7IGN0eCB9ID0gY29udGV4dFxyXG4gICAgY29uc3QgeyBvd25lciwgbmFtZSB9ID0gY3R4LnF1ZXJ5XHJcbiAgICBjb25zdCB7IGRhdGEgfSA9IGF3YWl0IHJlcXVlc3Qoe1xyXG4gICAgICB1cmw6IGAvcmVwb3MvJHtvd25lcn0vJHtuYW1lfWAsXHJcbiAgICB9LCBjdHgucmVxLCBjdHgucmVzKVxyXG5cclxuICAgIGxldCBwYWdlRGF0YSA9IHt9XHJcbiAgICBpZiAoQ29tcC5nZXRJbml0aWFsUHJvcHMpIHtcclxuICAgICAgcGFnZURhdGEgPSBhd2FpdCBDb21wLmdldEluaXRpYWxQcm9wcyhjb250ZXh0KVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgcmVwb0Jhc2ljOiBkYXRhLFxyXG4gICAgICAuLi5wYWdlRGF0YSxcclxuICAgIH1cclxuICB9KVxyXG5cclxuICByZXR1cm4gd2l0aFJvdXRlcihXaXRoRGV0YWlsKVxyXG59XHJcbiJdfQ== */\\n/*@ sourceURL=D:\\\\reactStudy\\\\Next-Koa-GitHub\\\\next-github\\\\components\\\\WithRepoBasic.jsx */\"));\n  };\n\n  WithDetail.getInitialProps = cache(async context => {\n    const {\n      ctx\n    } = context;\n    const {\n      owner,\n      name\n    } = ctx.query;\n    const {\n      data\n    } = await request({\n      url: `/repos/${owner}/${name}`\n    }, ctx.req, ctx.res);\n    let pageData = {};\n\n    if (Comp.getInitialProps) {\n      pageData = await Comp.getInitialProps(context);\n    }\n\n    return _objectSpread({\n      repoBasic: data\n    }, pageData);\n  });\n  return withRouter(WithDetail);\n});","map":{"version":3,"sources":["D:\\reactStudy\\Next-Koa-GitHub\\next-github\\components\\WithRepoBasic.jsx"],"names":["Link","withRouter","Repo","request","initCache","genDetailCacheKeyStrate","genDetailCacheKey","makeQuery","queryObject","query","reduce","result","entry","push","join","cache","useCache","genCacheKeyStrate","Comp","type","WithDetail","repoBasic","router","rest","getInitialProps","context","ctx","owner","name","data","url","req","res","pageData"],"mappings":";;;;;;AAAA,OAAOA,IAAP,MAAiB,WAAjB;AACA,SAASC,UAAT,QAA2B,aAA3B;AACA,OAAOC,IAAP,MAAiB,QAAjB;AACA,SAASC,OAAT,QAAwB,YAAxB;AACA,OAAOC,SAAP,MAAsB,qBAAtB;AACA,SAASC,uBAAT,EAAkCC,iBAAlC,QAA2D,aAA3D;;AAEA,SAASC,SAAT,CAAmBC,WAAnB,EAAgC;AAC9B,QAAMC,KAAK,GAAG,gBAAeD,WAAf,EACXE,MADW,CACJ,CAACC,MAAD,EAASC,KAAT,KAAmB;AACzBD,IAAAA,MAAM,CAACE,IAAP,CAAYD,KAAK,CAACE,IAAN,CAAW,GAAX,CAAZ;AACA,WAAOH,MAAP;AACD,GAJW,EAIT,EAJS,EAKXG,IALW,CAKN,GALM,CAAd;;AAMA,SAAQ,IAAGL,KAAM,EAAjB;AACD;;AAED,MAAM;AAAEM,EAAAA,KAAF;AAASC,EAAAA;AAAT,IAAsBZ,SAAS,CAAC;AACpCa,EAAAA,iBAAiB,EAAEZ;AADiB,CAAD,CAArC;AAGA,gBAAe,CAACa,IAAD,EAAOC,IAAI,GAAG,OAAd,KAA0B;AACvC,QAAMC,UAAU,GAAG,UAAoC;AAAA,QAAnC;AAAEC,MAAAA,SAAF;AAAaC,MAAAA;AAAb,KAAmC;AAAA,QAAXC,IAAW;;AACrDP,IAAAA,QAAQ,CAACV,iBAAiB,CAACgB,MAAD,CAAlB;AAA8BD,MAAAA;AAA9B,OAA4CE,IAA5C,EAAR;AACA,UAAMd,KAAK,GAAGF,SAAS,CAACe,MAAM,CAACb,KAAR,CAAvB;AACA,WACE;AAAA,0CAAe;AAAf,OACE;AAAA,0CAAe;AAAf,OACE,MAAC,IAAD;AAAM,MAAA,IAAI,EAAEY;AAAZ,MADF,EAEE;AAAA,0CAAe;AAAf,OACE,MAAC,IAAD;AAAM,MAAA,IAAI,EAAG,UAASZ,KAAM;AAA5B,OACGU,IAAI,KAAK,OAAT,GACC;AAAA,0CAAgB;AAAhB,gBADD,GAGC;AAAG,MAAA,KAAK,EAAC,QAAT;AAAA,0CAA4B;AAA5B,gBAJJ,CADF,EAQE,MAAC,IAAD;AAAM,MAAA,IAAI,EAAG,iBAAgBV,KAAM;AAAnC,OACGU,IAAI,KAAK,QAAT,GACC;AAAA,0CAAgB;AAAhB,gBADD,GAGC;AAAG,MAAA,KAAK,EAAC,QAAT;AAAA,0CAA4B;AAA5B,gBAJJ,CARF,CAFF,CADF,EAoBE;AAAA;AAAA,OACE,MAAC,IAAD,EAAUI,IAAV,CADF,CApBF;AAAA;AAAA,+rIADF;AA2CD,GA9CD;;AAgDAH,EAAAA,UAAU,CAACI,eAAX,GAA6BT,KAAK,CAAC,MAAOU,OAAP,IAAmB;AACpD,UAAM;AAAEC,MAAAA;AAAF,QAAUD,OAAhB;AACA,UAAM;AAAEE,MAAAA,KAAF;AAASC,MAAAA;AAAT,QAAkBF,GAAG,CAACjB,KAA5B;AACA,UAAM;AAAEoB,MAAAA;AAAF,QAAW,MAAM1B,OAAO,CAAC;AAC7B2B,MAAAA,GAAG,EAAG,UAASH,KAAM,IAAGC,IAAK;AADA,KAAD,EAE3BF,GAAG,CAACK,GAFuB,EAElBL,GAAG,CAACM,GAFc,CAA9B;AAIA,QAAIC,QAAQ,GAAG,EAAf;;AACA,QAAIf,IAAI,CAACM,eAAT,EAA0B;AACxBS,MAAAA,QAAQ,GAAG,MAAMf,IAAI,CAACM,eAAL,CAAqBC,OAArB,CAAjB;AACD;;AACD;AACEJ,MAAAA,SAAS,EAAEQ;AADb,OAEKI,QAFL;AAID,GAfiC,CAAlC;AAiBA,SAAOhC,UAAU,CAACmB,UAAD,CAAjB;AACD,CAnED","sourcesContent":["import Link from 'next/link'\r\nimport { withRouter } from 'next/router'\r\nimport Repo from './Repo'\r\nimport { request } from '../lib/api'\r\nimport initCache from '../lib/client-cache'\r\nimport { genDetailCacheKeyStrate, genDetailCacheKey } from '../lib/util'\r\n\r\nfunction makeQuery(queryObject) {\r\n  const query = Object.entries(queryObject)\r\n    .reduce((result, entry) => {\r\n      result.push(entry.join('='))\r\n      return result\r\n    }, [])\r\n    .join('&')\r\n  return `?${query}`\r\n}\r\n\r\nconst { cache, useCache } = initCache({\r\n  genCacheKeyStrate: genDetailCacheKeyStrate,\r\n})\r\nexport default (Comp, type = 'index') => {\r\n  const WithDetail = ({ repoBasic, router, ...rest }) => {\r\n    useCache(genDetailCacheKey(router), { repoBasic, ...rest })\r\n    const query = makeQuery(router.query)\r\n    return (\r\n      <div className=\"root\">\r\n        <div className=\"repo-basic\">\r\n          <Repo repo={repoBasic} />\r\n          <div className=\"tabs\">\r\n            <Link href={`/detail${query}`}>\r\n              {type === 'index' ? (\r\n                <span className=\"tab\">Readme</span>\r\n              ) : (\r\n                <a title=\"readme\" className=\"tab index\">Readme</a>\r\n              )}\r\n            </Link>\r\n            <Link href={`/detail/issues${query}`}>\r\n              {type === 'issues' ? (\r\n                <span className=\"tab\">Issues</span>\r\n              ) : (\r\n                <a title=\"issues\" className=\"tab issues\">Issues</a>\r\n              )}\r\n            </Link>\r\n          </div>\r\n        </div>\r\n        <div>\r\n          <Comp {...rest} />\r\n        </div>\r\n        <style jsx>{`\r\n            .root {\r\n              padding-top: 20px;\r\n            }\r\n  \r\n            .repo-basic {\r\n              padding: 20px;\r\n              border: 1px solid #eee;\r\n              margin-bottom: 20px;\r\n              border-radius: 5px;\r\n            }\r\n  \r\n            .tab + .tab {\r\n              margin-left: 20px;\r\n            }\r\n          `}\r\n        </style>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  WithDetail.getInitialProps = cache(async (context) => {\r\n    const { ctx } = context\r\n    const { owner, name } = ctx.query\r\n    const { data } = await request({\r\n      url: `/repos/${owner}/${name}`,\r\n    }, ctx.req, ctx.res)\r\n\r\n    let pageData = {}\r\n    if (Comp.getInitialProps) {\r\n      pageData = await Comp.getInitialProps(context)\r\n    }\r\n    return {\r\n      repoBasic: data,\r\n      ...pageData,\r\n    }\r\n  })\r\n\r\n  return withRouter(WithDetail)\r\n}\r\n"]},"metadata":{},"sourceType":"module"}