{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport _objectSpread from \"@babel/runtime-corejs2/helpers/esm/objectSpread\";\nimport _objectWithoutProperties from \"@babel/runtime-corejs2/helpers/esm/objectWithoutProperties\";\nimport _Object$entries from \"@babel/runtime-corejs2/core-js/object/entries\";\nimport _JSXStyle from \"styled-jsx/style\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport Link from 'next/link';\nimport { withRouter } from 'next/router';\nimport Repo from './Repo';\nimport { request } from '../lib/api';\nimport initCache from '../lib/client-cache';\nimport { genDetailCacheKeyStrate, genDetailCacheKey } from '../lib/util';\n\nfunction makeQuery(queryObject) {\n  var query = _Object$entries(queryObject).reduce(function (result, entry) {\n    result.push(entry.join('='));\n    return result;\n  }, []).join('&');\n\n  return \"?\".concat(query);\n}\n\nvar _initCache = initCache({\n  genCacheKeyStrate: genDetailCacheKeyStrate\n}),\n    cache = _initCache.cache,\n    useCache = _initCache.useCache;\n\nexport default (function (Comp) {\n  var type = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'index';\n\n  var WithDetail = function WithDetail(_ref) {\n    var repoBasic = _ref.repoBasic,\n        router = _ref.router,\n        rest = _objectWithoutProperties(_ref, [\"repoBasic\", \"router\"]);\n\n    useCache(genDetailCacheKey(router), _objectSpread({\n      repoBasic: repoBasic\n    }, rest));\n    var query = makeQuery(router.query);\n    return __jsx(\"div\", {\n      className: \"jsx-1904177248\" + \" \" + \"root\"\n    }, __jsx(\"div\", {\n      className: \"jsx-1904177248\" + \" \" + \"repo-basic\"\n    }, __jsx(Repo, {\n      repo: repoBasic\n    }), __jsx(\"div\", {\n      className: \"jsx-1904177248\" + \" \" + \"tabs\"\n    }, __jsx(Link, {\n      href: \"/detail\".concat(query)\n    }, type === 'index' ? __jsx(\"span\", {\n      className: \"jsx-1904177248\" + \" \" + \"tab\"\n    }, \"Readme\") : __jsx(\"a\", {\n      title: \"readme\",\n      className: \"jsx-1904177248\" + \" \" + \"tab index\"\n    }, \"Readme\")), __jsx(Link, {\n      href: \"/detail/issues\".concat(query)\n    }, type === 'issues' ? __jsx(\"span\", {\n      className: \"jsx-1904177248\" + \" \" + \"tab\"\n    }, \"Issues\") : __jsx(\"a\", {\n      title: \"issues\",\n      className: \"jsx-1904177248\" + \" \" + \"tab issues\"\n    }, \"Issues\")))), __jsx(\"div\", {\n      className: \"jsx-1904177248\"\n    }, __jsx(Comp, rest)), __jsx(_JSXStyle, {\n      id: \"1904177248\"\n    }, \".root.jsx-1904177248{padding-top:20px;}.repo-basic.jsx-1904177248{padding:20px;border:1px solid #eee;margin-bottom:20px;border-radius:5px;}.tab.jsx-1904177248+.tab.jsx-1904177248{margin-left:20px;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkQ6XFxyZWFjdFN0dWR5XFxOZXh0LUtvYS1HaXRIdWJcXG5leHQtZ2l0aHViXFxjb21wb25lbnRzXFxXaXRoUmVwb0Jhc2ljLmpzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFnRG9CLEFBR2dDLEFBSUosQUFPSSxhQU5LLElBSnhCLEFBV0Esa0JBTnFCLG1CQUNELGtCQUNwQiIsImZpbGUiOiJEOlxccmVhY3RTdHVkeVxcTmV4dC1Lb2EtR2l0SHViXFxuZXh0LWdpdGh1YlxcY29tcG9uZW50c1xcV2l0aFJlcG9CYXNpYy5qc3giLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgTGluayBmcm9tICduZXh0L2xpbmsnXHJcbmltcG9ydCB7IHdpdGhSb3V0ZXIgfSBmcm9tICduZXh0L3JvdXRlcidcclxuaW1wb3J0IFJlcG8gZnJvbSAnLi9SZXBvJ1xyXG5pbXBvcnQgeyByZXF1ZXN0IH0gZnJvbSAnLi4vbGliL2FwaSdcclxuaW1wb3J0IGluaXRDYWNoZSBmcm9tICcuLi9saWIvY2xpZW50LWNhY2hlJ1xyXG5pbXBvcnQgeyBnZW5EZXRhaWxDYWNoZUtleVN0cmF0ZSwgZ2VuRGV0YWlsQ2FjaGVLZXkgfSBmcm9tICcuLi9saWIvdXRpbCdcclxuXHJcbmZ1bmN0aW9uIG1ha2VRdWVyeShxdWVyeU9iamVjdCkge1xyXG4gIGNvbnN0IHF1ZXJ5ID0gT2JqZWN0LmVudHJpZXMocXVlcnlPYmplY3QpXHJcbiAgICAucmVkdWNlKChyZXN1bHQsIGVudHJ5KSA9PiB7XHJcbiAgICAgIHJlc3VsdC5wdXNoKGVudHJ5LmpvaW4oJz0nKSlcclxuICAgICAgcmV0dXJuIHJlc3VsdFxyXG4gICAgfSwgW10pXHJcbiAgICAuam9pbignJicpXHJcbiAgcmV0dXJuIGA/JHtxdWVyeX1gXHJcbn1cclxuXHJcbmNvbnN0IHsgY2FjaGUsIHVzZUNhY2hlIH0gPSBpbml0Q2FjaGUoe1xyXG4gIGdlbkNhY2hlS2V5U3RyYXRlOiBnZW5EZXRhaWxDYWNoZUtleVN0cmF0ZSxcclxufSlcclxuZXhwb3J0IGRlZmF1bHQgKENvbXAsIHR5cGUgPSAnaW5kZXgnKSA9PiB7XHJcbiAgY29uc3QgV2l0aERldGFpbCA9ICh7IHJlcG9CYXNpYywgcm91dGVyLCAuLi5yZXN0IH0pID0+IHtcclxuICAgIHVzZUNhY2hlKGdlbkRldGFpbENhY2hlS2V5KHJvdXRlciksIHsgcmVwb0Jhc2ljLCAuLi5yZXN0IH0pXHJcbiAgICBjb25zdCBxdWVyeSA9IG1ha2VRdWVyeShyb3V0ZXIucXVlcnkpXHJcbiAgICByZXR1cm4gKFxyXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cInJvb3RcIj5cclxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInJlcG8tYmFzaWNcIj5cclxuICAgICAgICAgIDxSZXBvIHJlcG89e3JlcG9CYXNpY30gLz5cclxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGFic1wiPlxyXG4gICAgICAgICAgICA8TGluayBocmVmPXtgL2RldGFpbCR7cXVlcnl9YH0+XHJcbiAgICAgICAgICAgICAge3R5cGUgPT09ICdpbmRleCcgPyAoXHJcbiAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJ0YWJcIj5SZWFkbWU8L3NwYW4+XHJcbiAgICAgICAgICAgICAgKSA6IChcclxuICAgICAgICAgICAgICAgIDxhIHRpdGxlPVwicmVhZG1lXCIgY2xhc3NOYW1lPVwidGFiIGluZGV4XCI+UmVhZG1lPC9hPlxyXG4gICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgIDwvTGluaz5cclxuICAgICAgICAgICAgPExpbmsgaHJlZj17YC9kZXRhaWwvaXNzdWVzJHtxdWVyeX1gfT5cclxuICAgICAgICAgICAgICB7dHlwZSA9PT0gJ2lzc3VlcycgPyAoXHJcbiAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJ0YWJcIj5Jc3N1ZXM8L3NwYW4+XHJcbiAgICAgICAgICAgICAgKSA6IChcclxuICAgICAgICAgICAgICAgIDxhIHRpdGxlPVwiaXNzdWVzXCIgY2xhc3NOYW1lPVwidGFiIGlzc3Vlc1wiPklzc3VlczwvYT5cclxuICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICA8L0xpbms+XHJcbiAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8ZGl2PlxyXG4gICAgICAgICAgPENvbXAgey4uLnJlc3R9IC8+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPHN0eWxlIGpzeD57YFxyXG4gICAgICAgICAgICAucm9vdCB7XHJcbiAgICAgICAgICAgICAgcGFkZGluZy10b3A6IDIwcHg7XHJcbiAgICAgICAgICAgIH1cclxuICBcclxuICAgICAgICAgICAgLnJlcG8tYmFzaWMge1xyXG4gICAgICAgICAgICAgIHBhZGRpbmc6IDIwcHg7XHJcbiAgICAgICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgI2VlZTtcclxuICAgICAgICAgICAgICBtYXJnaW4tYm90dG9tOiAyMHB4O1xyXG4gICAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDVweDtcclxuICAgICAgICAgICAgfVxyXG4gIFxyXG4gICAgICAgICAgICAudGFiICsgLnRhYiB7XHJcbiAgICAgICAgICAgICAgbWFyZ2luLWxlZnQ6IDIwcHg7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIGB9XHJcbiAgICAgICAgPC9zdHlsZT5cclxuICAgICAgPC9kaXY+XHJcbiAgICApXHJcbiAgfVxyXG5cclxuICBXaXRoRGV0YWlsLmdldEluaXRpYWxQcm9wcyA9IGNhY2hlKGFzeW5jIChjb250ZXh0KSA9PiB7XHJcbiAgICBjb25zdCB7IGN0eCB9ID0gY29udGV4dFxyXG4gICAgY29uc3QgeyBvd25lciwgbmFtZSB9ID0gY3R4LnF1ZXJ5XHJcbiAgICBjb25zdCB7IGRhdGEgfSA9IGF3YWl0IHJlcXVlc3Qoe1xyXG4gICAgICB1cmw6IGAvcmVwb3MvJHtvd25lcn0vJHtuYW1lfWAsXHJcbiAgICB9LCBjdHgucmVxLCBjdHgucmVzKVxyXG5cclxuICAgIGxldCBwYWdlRGF0YSA9IHt9XHJcbiAgICBpZiAoQ29tcC5nZXRJbml0aWFsUHJvcHMpIHtcclxuICAgICAgcGFnZURhdGEgPSBhd2FpdCBDb21wLmdldEluaXRpYWxQcm9wcyhjb250ZXh0KVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgcmVwb0Jhc2ljOiBkYXRhLFxyXG4gICAgICAuLi5wYWdlRGF0YSxcclxuICAgIH1cclxuICB9KVxyXG5cclxuICByZXR1cm4gd2l0aFJvdXRlcihXaXRoRGV0YWlsKVxyXG59XHJcbiJdfQ== */\\n/*@ sourceURL=D:\\\\reactStudy\\\\Next-Koa-GitHub\\\\next-github\\\\components\\\\WithRepoBasic.jsx */\"));\n  };\n\n  WithDetail.getInitialProps = cache(\n  /*#__PURE__*/\n  function () {\n    var _ref2 = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee(context) {\n      var ctx, _ctx$query, owner, name, _ref3, data, pageData;\n\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              ctx = context.ctx;\n              _ctx$query = ctx.query, owner = _ctx$query.owner, name = _ctx$query.name;\n              _context.next = 4;\n              return request({\n                url: \"/repos/\".concat(owner, \"/\").concat(name)\n              }, ctx.req, ctx.res);\n\n            case 4:\n              _ref3 = _context.sent;\n              data = _ref3.data;\n              pageData = {};\n\n              if (!Comp.getInitialProps) {\n                _context.next = 11;\n                break;\n              }\n\n              _context.next = 10;\n              return Comp.getInitialProps(context);\n\n            case 10:\n              pageData = _context.sent;\n\n            case 11:\n              return _context.abrupt(\"return\", _objectSpread({\n                repoBasic: data\n              }, pageData));\n\n            case 12:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function (_x) {\n      return _ref2.apply(this, arguments);\n    };\n  }());\n  return withRouter(WithDetail);\n});","map":{"version":3,"sources":["D:\\reactStudy\\Next-Koa-GitHub\\next-github\\components\\WithRepoBasic.jsx"],"names":["Link","withRouter","Repo","request","initCache","genDetailCacheKeyStrate","genDetailCacheKey","makeQuery","queryObject","query","reduce","result","entry","push","join","genCacheKeyStrate","cache","useCache","Comp","type","WithDetail","repoBasic","router","rest","getInitialProps","context","ctx","owner","name","url","req","res","data","pageData"],"mappings":"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","sourcesContent":["import Link from 'next/link'\r\nimport { withRouter } from 'next/router'\r\nimport Repo from './Repo'\r\nimport { request } from '../lib/api'\r\nimport initCache from '../lib/client-cache'\r\nimport { genDetailCacheKeyStrate, genDetailCacheKey } from '../lib/util'\r\n\r\nfunction makeQuery(queryObject) {\r\n  const query = Object.entries(queryObject)\r\n    .reduce((result, entry) => {\r\n      result.push(entry.join('='))\r\n      return result\r\n    }, [])\r\n    .join('&')\r\n  return `?${query}`\r\n}\r\n\r\nconst { cache, useCache } = initCache({\r\n  genCacheKeyStrate: genDetailCacheKeyStrate,\r\n})\r\nexport default (Comp, type = 'index') => {\r\n  const WithDetail = ({ repoBasic, router, ...rest }) => {\r\n    useCache(genDetailCacheKey(router), { repoBasic, ...rest })\r\n    const query = makeQuery(router.query)\r\n    return (\r\n      <div className=\"root\">\r\n        <div className=\"repo-basic\">\r\n          <Repo repo={repoBasic} />\r\n          <div className=\"tabs\">\r\n            <Link href={`/detail${query}`}>\r\n              {type === 'index' ? (\r\n                <span className=\"tab\">Readme</span>\r\n              ) : (\r\n                <a title=\"readme\" className=\"tab index\">Readme</a>\r\n              )}\r\n            </Link>\r\n            <Link href={`/detail/issues${query}`}>\r\n              {type === 'issues' ? (\r\n                <span className=\"tab\">Issues</span>\r\n              ) : (\r\n                <a title=\"issues\" className=\"tab issues\">Issues</a>\r\n              )}\r\n            </Link>\r\n          </div>\r\n        </div>\r\n        <div>\r\n          <Comp {...rest} />\r\n        </div>\r\n        <style jsx>{`\r\n            .root {\r\n              padding-top: 20px;\r\n            }\r\n  \r\n            .repo-basic {\r\n              padding: 20px;\r\n              border: 1px solid #eee;\r\n              margin-bottom: 20px;\r\n              border-radius: 5px;\r\n            }\r\n  \r\n            .tab + .tab {\r\n              margin-left: 20px;\r\n            }\r\n          `}\r\n        </style>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  WithDetail.getInitialProps = cache(async (context) => {\r\n    const { ctx } = context\r\n    const { owner, name } = ctx.query\r\n    const { data } = await request({\r\n      url: `/repos/${owner}/${name}`,\r\n    }, ctx.req, ctx.res)\r\n\r\n    let pageData = {}\r\n    if (Comp.getInitialProps) {\r\n      pageData = await Comp.getInitialProps(context)\r\n    }\r\n    return {\r\n      repoBasic: data,\r\n      ...pageData,\r\n    }\r\n  })\r\n\r\n  return withRouter(WithDetail)\r\n}\r\n"]},"metadata":{},"sourceType":"module"}